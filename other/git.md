# Git

**Git**とはファイルをバージョンごとに管理するシステムです

バージョン管理とはファイルの変更された部分(差分)を記録することです

どのようなメリットがあるかというと

- 差分をローカル(自分の手元の環境)で記録できれば間違えて変更した部分を直すことが可能です
  - いちいちファイルを作り直さずに変更した部分だけを直すことができるというのが魅力です
- 差分をリモート(クラウドなど手元でない環境)で記録できれば他人と変更した部分だけをやり取りして編集できます
  - これもいちいちファイルを丸ごと作り直さずに済みます
  - また,変更履歴を枝分かれさせて同じプロジェクトでも異なるバージョンとして管理することが可能です

## Gitコマンド基礎

ここでは基礎的なGitのコマンドに関して(必要最低限と僕が思う)説明をします

最初に覚えるべきコマンドは

- `git init`
- `git add`
- `git commit`
- `git push`

の4つです

Gitではいきなり差分を登録しません.次のような順序があります

- `init`というコマンドで｢差分を記録する**ローカルレポジトリを作り**｣ます
- `add`というコマンドで｢差分を記録する**ファイルを指定**｣します
- `commit`というコマンドで｢差分を**ローカルレポジトリで記録**｣します
- `push`というコマンドで｢差分を**リモートレポジトリに記録**｣します

ここでわからない単語[^1]が出てきても後から説明をするので｢そういうものがあるのだな｣と思ってくれれば大丈夫です

[^1]: 例えば｢レポジトリ｣など

### `init`

このコマンドは差分を記録する**ローカルレポジトリ**を作ります

文脈によって意味が変わるのですが,Gitの場合のレポジトリが何かと言いますとファイルやディレクトリの変更履歴(今後は**差分**と呼びます)を記録するところです

｢ローカル｣というのは｢自分の手元のPCの｣という意味です.これとは別に｢**リモートレポジトリ**｣というのも登場しますが,これはサーバー上にあるレポジトリのことです

`git init`により,空にディレクトリを作成することができます.これによって差分が何も記録されていないまっさらなレポジトリが作成されます

これによってこれ以降のコマンドを使用することが可能になります

|コマンド|意味|
|-|-|
|`git init`|空のローカルレポジトリを作成する|

### `add`

レポジトリに差分を登録するには差分を先に**ステージングエリア**に置く(このことを**ステージング**と言います)必要があります

｢で,ステージングエリアってなんだろう?｣と思った人のために言うと,誤解を恐れずに言えばこれは階段の踊り場みたいなものです

2階(レポジトリ)に差分を記録する前に,1階のファイルを一旦階段の踊り場に集めます.そして,これで良いと思ったら一気にレポジトリに記録します

なぜこれをするのかと言うとファイルは変更したけど,差分は記録したくないときがあります.例えば,中途半端に書きかけの関数があるファイルなどです.そのときに差分を記録したいファイルだけをステージングします

|コマンド|意味|
|-|-|
|`git add .`|現在いるディレクトリ(カレントディレクトリと言います)を全てステージングする(`.`はカレントディレクトリの意味)|
|`git add a.txt`|`a.txt`というファイルとステージングする|
|`git add src/b.txt`|`src`ディレクトリにある`b.txt`というファイルをステージングする|

### `commit`

`git commit`はステージングエリアにあるファイルやディレクトリを実際にレポジトリに記録することです

この際にただファイルを記録するだけではどんな変更かわからないので,メッセージを付けます.その際に`-m`をコメントの前に付けます

例えば`git commit -m "first commit"`とすると最初のコミットなんだなということがわかります

`-m`を付けないとエディタが出てきて,エディタ内でコメントする必要があります

また,メッセージを間違えてコミットしたときのために`git commit --amend`というオプションがあります

```git
git add a.txt
git commit -m "add aaaaa" # メッセージを間違えた
git commit --amend -m "add a.txt" # 正しく直す
```

|コマンド|意味|
|-|-|
|`git commit -m "message"`|messageというコメントを付け加えて差分を記録する|
|`git commit --amend -m "fix"`|前回のコミットのメッセージを取り消して新しく記録|

### `push`

`push`はリモートレポジトリにも差分を記録する(プッシュする)コマンドです

最初に`remote add`とすることでリモートレポジトリを指定します

次に`git push origin master`とすることで差分をリモートに記録します(`origin`と`master`はとりあえず今回は扱わないので,そういうものだと思って下さい)

この際に`-u`というオプションを加えるとそれ以降`git push`とするだけでプッシュができるようになります.`-u`とは`--set-upstream`の略でデフォルトの差分登録場所みたいなものを定めています

|コマンド|意味|
|-|-|
|`git remote add origin git@github.com:abc/c.git`|GitHubの`abc`というユーザーの`c`というディレクトリをリモートレポジトリに指定する|
|`git push -u origin master`|デフォルトの差分登録場所を決めて,プッシュする|
|`git push origin master`|プッシュする|
